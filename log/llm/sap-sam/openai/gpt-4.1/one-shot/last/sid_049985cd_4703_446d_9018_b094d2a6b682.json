{
  "name": "openai/gpt-4.1 - one-shot",
  "timestamp": "2025-06-10T22:20:58.037Z",
  "model": "openai/gpt-4.1",
  "prompt": "Generate a Solidity smart contract from the BPMN 2.0 choreography model XML provided above.\n\nUse the following implementation rules:\n\n- The contract name must be the `id` of the `<choreography>` element in the model.\n- Implement the function `enact(uint taskID) external` which allows a participant to execute a choreography task.\n- Only `<choreographyTask>` elements are executable via `enact()`. Gateways and start/end events are handled internally.\n- Enforce the order of task execution based on `<sequenceFlow>` elements and the choreography's control flow.\nUse the following mapping of taskID to `choreographyTask` id of the model:\n```json\n{\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F\":1,\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA\":2,\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0\":3,\"sid-A70C991E-702F-4C96-9488-D630468D3804\":4,\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4\":5,\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78\":6,\"sid-85CDD208-375B-493C-808D-239AB05D7F30\":7}\n```\n- Implement exclusive gateways (`<exclusiveGateway>`) using Solidity conditional logic.\n  - Each exclusive gateway must evaluate all conditional `<sequenceFlow>` elements when active.\n  - Use Solidity `if (conditions & N == N)` syntax, exactly as defined in the `<conditionExpression>`.\n  - If at least one condition is satisfied, activate the target task.\n  - If none are satisfied, follow the `default` sequenceFlow.\n  - Each condition must be evaluated only when the gateway's bit is active in `tokenState`.\n  - Use a variable `uint public conditions` and include a setter: `function setConditions(uint _conditions) external`.\n\n- Implement parallel gateways (`<parallelGateway>`) as:\n  - Join: wait for all incoming tokens to activate.\n  - Split: activate all outgoing tasks concurrently.\n\n- Use `uint public tokenState` to encode current control flow positions:\n  - Each active task or gateway is tracked using a unique bit (e.g., 1, 2, 4, 8...).\n  - Use bitmasking (`&`, `|`, `~`) to activate or deactivate paths.\n  - Transitions may activate multiple concurrent paths.\n\n- Use the constructor: `constructor(address[n] memory _participants)` where `n` is the number of participants.\n- Allow execution of each task only by the correct initiating participant, using:\n  ```solidity\n  require(msg.sender == participants[i]);\n  ```\n- Use this mapping of participant index to participant ID:\n```json\n{\"sid-FC50287B-70BB-40CD-B695-775C633D38E3\":0,\"sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956\":1,\"sid-427857D4-680C-4995-A14C-F58E8785B573\":2,\"sid-AEE838F7-26E3-4D9A-888D-35D0A0B38151\":3,\"sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC\":4,\"sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC\":5,\"sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2\":6,\"sid-BCC388E4-2F4E-4DCE-ACAB-1B057FD12B1D\":7,\"sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4\":8,\"sid-FF49689C-332B-42D1-AD6C-8D057D858886\":9,\"sid-E819EC9E-E419-4A8A-95A1-65B2F582C198\":10,\"sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE\":11,\"sid-06A843E0-3E80-48A2-B6B9-79C33F0AF6FA\":12,\"sid-28ABFC83-A09A-472A-9B65-584A100D415E\":13}\n```\n\n- At the end of the process, set `tokenState = 0` to indicate termination.\n- Do not output any text other than the Solidity contract itself.\n\nAn example.\nGiven the choreography\n```XML\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions id=\"_tTv5YOycEeiHGOQ2NkJZNQ\" targetNamespace=\"http://bpmn.io/schema/bpmn\">\n  <message id=\"Message_032z8ml\"></message>\n  <message id=\"Message_19qrd5q\"></message>\n  <message id=\"Message_0vnm1wq\"></message>\n  <message id=\"Message_085o98p\"></message>\n  <choreography id=\"ChoreographyExample\">\n    <participant id=\"Participant_1tzf68i\" name=\"Customer\"></participant>\n    <participant id=\"Participant_198pz14\" name=\"Seller\"></participant>\n    <participant id=\"Participant_0378t5g\" name=\"Manufacturer\"></participant>\n    <messageFlow id=\"MessageFlow_0r98f9o\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_1tzf68i\" messageRef=\"Message_032z8ml\"></messageFlow>\n    <messageFlow id=\"MessageFlow_18xf3u6\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_1tzf68i\" messageRef=\"Message_19qrd5q\"></messageFlow>\n    <messageFlow id=\"MessageFlow_0r00txu\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_0378t5g\" messageRef=\"Message_0vnm1wq\"></messageFlow>\n    <messageFlow id=\"MessageFlow_1cx9rl4\" sourceRef=\"Participant_1tzf68i\" targetRef=\"Participant_198pz14\" messageRef=\"Message_085o98p\"></messageFlow>\n    <startEvent id=\"Event_0y1sdn3\">\n      <outgoing>Flow_0e2c805</outgoing>\n    </startEvent>\n    <choreographyTask id=\"ChoreographyTask_1vnykqp\" name=\"Order goods\" initiatingParticipantRef=\"Participant_1tzf68i\">\n      <incoming>Flow_0e2c805</incoming>\n      <outgoing>Flow_0d6j7vb</outgoing>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <participantRef>Participant_198pz14</participantRef>\n      <messageFlowRef>MessageFlow_1cx9rl4</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_16lc74v\" name=\"Produce goods\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_0ybxbuc</incoming>\n      <outgoing>Flow_14ulro8</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_0378t5g</participantRef>\n      <messageFlowRef>MessageFlow_0r00txu</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_07t2zjo\" name=\"Inform customer\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_02gqwyg</incoming>\n      <outgoing>Flow_1kim4vq</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <messageFlowRef>MessageFlow_18xf3u6</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_056ylqg\" name=\"Ship goods\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_11zi7qu</incoming>\n      <outgoing>Flow_04lnqsf</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <messageFlowRef>MessageFlow_0r98f9o</messageFlowRef>\n    </choreographyTask>\n    <sequenceFlow id=\"Flow_0e2c805\" sourceRef=\"Event_0y1sdn3\" targetRef=\"ChoreographyTask_1vnykqp\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0d6j7vb\" sourceRef=\"ChoreographyTask_1vnykqp\" targetRef=\"Gateway_1bpkhpg\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0ymdsa2\" name=\"unavailable\" sourceRef=\"Gateway_1bpkhpg\" targetRef=\"Gateway_1klfaw3\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0ybxbuc\" sourceRef=\"Gateway_1klfaw3\" targetRef=\"ChoreographyTask_16lc74v\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_02gqwyg\" sourceRef=\"Gateway_1klfaw3\" targetRef=\"ChoreographyTask_07t2zjo\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_1kim4vq\" sourceRef=\"ChoreographyTask_07t2zjo\" targetRef=\"Gateway_0xcnzox\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_14ulro8\" sourceRef=\"ChoreographyTask_16lc74v\" targetRef=\"Gateway_0xcnzox\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_067nql1\" name=\"available\" sourceRef=\"Gateway_1bpkhpg\" targetRef=\"Gateway_1yl9mch\">\n      <conditionExpression xsi:type=\"bpmn2:tFormalExpression\" language=\"Solidity\">conditions &amp; 1 == 1</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"Flow_198zju1\" sourceRef=\"Gateway_0xcnzox\" targetRef=\"Gateway_1yl9mch\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_11zi7qu\" sourceRef=\"Gateway_1yl9mch\" targetRef=\"ChoreographyTask_056ylqg\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_04lnqsf\" sourceRef=\"ChoreographyTask_056ylqg\" targetRef=\"Event_1ezlk4g\"></sequenceFlow>\n    <exclusiveGateway id=\"Gateway_1bpkhpg\" default=\"Flow_0ymdsa2\">\n      <incoming>Flow_0d6j7vb</incoming>\n      <outgoing>Flow_0ymdsa2</outgoing>\n      <outgoing>Flow_067nql1</outgoing>\n    </exclusiveGateway>\n    <exclusiveGateway id=\"Gateway_1yl9mch\" default=\"Flow_11zi7qu\">\n      <incoming>Flow_067nql1</incoming>\n      <incoming>Flow_198zju1</incoming>\n      <outgoing>Flow_11zi7qu</outgoing>\n    </exclusiveGateway>\n    <parallelGateway id=\"Gateway_1klfaw3\">\n      <incoming>Flow_0ymdsa2</incoming>\n      <outgoing>Flow_0ybxbuc</outgoing>\n      <outgoing>Flow_02gqwyg</outgoing>\n    </parallelGateway>\n    <parallelGateway id=\"Gateway_0xcnzox\">\n      <incoming>Flow_1kim4vq</incoming>\n      <incoming>Flow_14ulro8</incoming>\n      <outgoing>Flow_198zju1</outgoing>\n    </parallelGateway>\n    <endEvent id=\"Event_1ezlk4g\">\n      <incoming>Flow_04lnqsf</incoming>\n    </endEvent>\n  </choreography>\n</definitions>\n```\nA correct implementation is:\n```solidity\n//SPDX-License-Identifier: MIT\npragma solidity ^0.8.9;\n\ncontract ChoreographyExample {\n  // The example code uses bitmasking for the current state, as it is more efficient.\n  // tokenState represents the current active elements, which can include multiple concurrent paths.\n  uint public tokenState = 1;\n  address[3] public participants;\n  uint public conditions;\n\n  constructor(address[3] memory _participants) {\n    participants = _participants;\n  }\n  function setConditions(uint _conditions) external {\n    conditions = _conditions;\n  }\n\n  function enact(uint id) external {\n    uint _tokenState = tokenState;\n\n    while(_tokenState != 0) {\n      if (_tokenState & 1 == 1) {\n        // <--- ChoreographyTask_1vnykqp Order goods --->\n        if (0 == id && msg.sender == participants[0]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(1);\n        _tokenState |= 6;\n        continue; \n        }\n      }\n      if (_tokenState & 2 == 2) {\n        // <--- ChoreographyTask_16lc74v Produce goods --->\n        if (1 == id && msg.sender == participants[1]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(2);\n        _tokenState |= 8;\n        continue; \n        }\n      }\n      if (_tokenState & 4 == 4) {\n        // <--- ChoreographyTask_07t2zjo Inform customer --->\n        if (2 == id && msg.sender == participants[1]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(4);\n        _tokenState |= 16;\n        continue; \n        }\n      }\n      if (_tokenState & 32 == 32) {\n        // <--- ChoreographyTask_056ylqg Ship goods --->\n        if (3 == id && msg.sender == participants[1]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(32);\n        _tokenState |= 0;\n        break; // is end\n        }\n      }\n      if (_tokenState & 6 == 6) {\n        if (conditions & 1 == 1) {\n          // <---  auto transition  --->\n          // Transition: deactivate current, activate next state\n          _tokenState &= ~uint(6);\n          _tokenState |= 32;\n          continue; \n        }\n      }\n      if (_tokenState & 24 == 24) {\n        // <---  auto transition  --->\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(24);\n        _tokenState |= 32;\n        continue; \n      }\n      break;\n    }\n\n    tokenState = _tokenState;\n  }\n\n}\n```",
  "input": "<ns0:definitions xmlns:ns0=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:ns2=\"http://www.signavio.com\" xmlns:ns3=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:ns4=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:ns5=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" exporter=\"Signavio Process Editor, http://www.signavio.com\" exporterVersion=\"19.1.2\" expressionLanguage=\"http://www.w3.org/TR/XPath\" id=\"sid-b482850f-4f3f-4821-8195-a3a31c74c187\" targetNamespace=\"http://www.signavio.com\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" xsi:schemaLocation=\"http://www.omg.org/spec/BPMN/20100524/MODEL http://www.omg.org/spec/BPMN/2.0/20100501/BPMN20.xsd\">\n  <ns0:message id=\"sid-7951FBF4-3779-40D3-AAE9-C8C3BF3D5798\" name=\"Offer\"></ns0:message>\n  <ns0:message id=\"sid-A35F7141-C380-4777-B07D-B66FF72A73A5\" name=\"Offer &amp;#10;rejection\"></ns0:message>\n  <ns0:message id=\"sid-ED3F1A6B-937F-4DBF-8B41-C8781501CEE2\" name=\"Booking\"></ns0:message>\n  <ns0:message id=\"sid-34A3DBE8-7DF2-4905-B191-373B64E68E71\" name=\"Booking &amp;#10;confirmation\"></ns0:message>\n  <ns0:message id=\"sid-DD3DBB71-474E-452C-93C7-B64DE92F14F8\" name=\"Payment\"></ns0:message>\n  <ns0:message id=\"sid-3D15E113-8806-4AF1-A804-237AC717245C\" name=\"Ticket order\"></ns0:message>\n  <ns0:message id=\"sid-4D3B4D7C-181B-41B1-A67F-E5BFD712EF0A\" name=\"Payment&amp;#10;confirmation\"></ns0:message>\n  <ns0:message id=\"sid-FB0434EF-EA65-4900-BF07-E93CF79BB1A8\" name=\"Payment&amp;#10;refusal\"></ns0:message>\n  <ns0:choreography id=\"sid_049985cd_4703_446d_9018_b094d2a6b682\" isClosed=\"false\">\n    <ns0:participant id=\"sid-FC50287B-70BB-40CD-B695-775C633D38E3\" name=\"Customer\"></ns0:participant>\n    <ns0:participant id=\"sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956\" name=\"Travel Agency\"></ns0:participant>\n    <ns0:participant id=\"sid-427857D4-680C-4995-A14C-F58E8785B573\" name=\"Customer\"></ns0:participant>\n    <ns0:participant id=\"sid-AEE838F7-26E3-4D9A-888D-35D0A0B38151\" name=\"Travel Agency\"></ns0:participant>\n    <ns0:participant id=\"sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC\" name=\"Customer\"></ns0:participant>\n    <ns0:participant id=\"sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC\" name=\"Travel Agency\"></ns0:participant>\n    <ns0:participant id=\"sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2\" name=\"Customer\"></ns0:participant>\n    <ns0:participant id=\"sid-BCC388E4-2F4E-4DCE-ACAB-1B057FD12B1D\" name=\"Travel Agency\"></ns0:participant>\n    <ns0:participant id=\"sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4\" name=\"Travel Agency\"></ns0:participant>\n    <ns0:participant id=\"sid-FF49689C-332B-42D1-AD6C-8D057D858886\" name=\"Airline\"></ns0:participant>\n    <ns0:participant id=\"sid-E819EC9E-E419-4A8A-95A1-65B2F582C198\" name=\"Customer\"></ns0:participant>\n    <ns0:participant id=\"sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE\" name=\"Airline\"></ns0:participant>\n    <ns0:participant id=\"sid-06A843E0-3E80-48A2-B6B9-79C33F0AF6FA\" name=\"Customer\"></ns0:participant>\n    <ns0:participant id=\"sid-28ABFC83-A09A-472A-9B65-584A100D415E\" name=\"Airline\"></ns0:participant>\n    <ns0:messageFlow id=\"sid-3bc352f7-fd33-47c4-9972-0b204e3f727f\" messageRef=\"sid-7951FBF4-3779-40D3-AAE9-C8C3BF3D5798\" sourceRef=\"sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956\" targetRef=\"sid-FC50287B-70BB-40CD-B695-775C633D38E3\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-b064f6e8-5eee-4108-8c20-d396126258c9\" messageRef=\"sid-A35F7141-C380-4777-B07D-B66FF72A73A5\" sourceRef=\"sid-427857D4-680C-4995-A14C-F58E8785B573\" targetRef=\"sid-AEE838F7-26E3-4D9A-888D-35D0A0B38151\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-e58a6ebe-e059-44b4-bb53-6252d7eb8d9b\" messageRef=\"sid-ED3F1A6B-937F-4DBF-8B41-C8781501CEE2\" sourceRef=\"sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC\" targetRef=\"sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-980374fa-f4df-4604-bc8b-fe2a60fd274d\" messageRef=\"sid-34A3DBE8-7DF2-4905-B191-373B64E68E71\" sourceRef=\"sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC\" targetRef=\"sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-50d78215-ab36-4126-a5ab-b8e4f90f2625\" messageRef=\"sid-DD3DBB71-474E-452C-93C7-B64DE92F14F8\" sourceRef=\"sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2\" targetRef=\"sid-BCC388E4-2F4E-4DCE-ACAB-1B057FD12B1D\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-15d8d73c-3a31-4ae8-b32a-6352396567a0\" messageRef=\"sid-3D15E113-8806-4AF1-A804-237AC717245C\" sourceRef=\"sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4\" targetRef=\"sid-FF49689C-332B-42D1-AD6C-8D057D858886\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-480e083f-04cd-4331-ab0e-3868a61e19aa\" messageRef=\"sid-4D3B4D7C-181B-41B1-A67F-E5BFD712EF0A\" sourceRef=\"sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE\" targetRef=\"sid-E819EC9E-E419-4A8A-95A1-65B2F582C198\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-cec720be-9112-42b4-91fc-63f05723bd58\" messageRef=\"sid-FB0434EF-EA65-4900-BF07-E93CF79BB1A8\" sourceRef=\"sid-28ABFC83-A09A-472A-9B65-584A100D415E\" targetRef=\"sid-06A843E0-3E80-48A2-B6B9-79C33F0AF6FA\"></ns0:messageFlow>\n    <ns0:startEvent id=\"sid-45C134F2-D2FD-4D0A-B72E-DBAFC35FB0DF\" name=\"Offer must&amp;#10;be needed\">\n      <ns0:outgoing>sid-04B8562B-303F-4214-B141-23DBBA44950B</ns0:outgoing>\n    </ns0:startEvent>\n    <ns0:choreographyTask id=\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F\" initiatingParticipantRef=\"sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956\" loopType=\"None\" name=\"Make travel offer\">\n      <ns0:incoming>sid-04B8562B-303F-4214-B141-23DBBA44950B</ns0:incoming>\n      <ns0:outgoing>sid-686F899C-B5AB-4B33-B5A5-D3931E153C38</ns0:outgoing>\n      <ns0:participantRef>sid-FC50287B-70BB-40CD-B695-775C633D38E3</ns0:participantRef>\n      <ns0:participantRef>sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956</ns0:participantRef>\n      <ns0:messageFlowRef>sid-3bc352f7-fd33-47c4-9972-0b204e3f727f</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA\" initiatingParticipantRef=\"sid-427857D4-680C-4995-A14C-F58E8785B573\" loopType=\"None\" name=\"Reject offer\">\n      <ns0:incoming>sid-84706E17-ABF5-43EB-8031-643E1E824B89</ns0:incoming>\n      <ns0:outgoing>sid-640C34D5-BBA6-413A-A141-57C74C53BF9D</ns0:outgoing>\n      <ns0:participantRef>sid-427857D4-680C-4995-A14C-F58E8785B573</ns0:participantRef>\n      <ns0:participantRef>sid-AEE838F7-26E3-4D9A-888D-35D0A0B38151</ns0:participantRef>\n      <ns0:messageFlowRef>sid-b064f6e8-5eee-4108-8c20-d396126258c9</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0\" initiatingParticipantRef=\"sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC\" loopType=\"None\" name=\"Book Travel&amp;#10;&amp;&amp;#10;confirm booking\">\n      <ns0:incoming>sid-B12CEDDB-9044-460F-BDC2-355C50A69040</ns0:incoming>\n      <ns0:outgoing>sid-24C344C6-9E1F-4574-9F1B-617A22746D90</ns0:outgoing>\n      <ns0:participantRef>sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC</ns0:participantRef>\n      <ns0:participantRef>sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC</ns0:participantRef>\n      <ns0:messageFlowRef>sid-e58a6ebe-e059-44b4-bb53-6252d7eb8d9b</ns0:messageFlowRef>\n      <ns0:messageFlowRef>sid-980374fa-f4df-4604-bc8b-fe2a60fd274d</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-A70C991E-702F-4C96-9488-D630468D3804\" initiatingParticipantRef=\"sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2\" loopType=\"None\" name=\"Pay Travel\">\n      <ns0:incoming>sid-24C344C6-9E1F-4574-9F1B-617A22746D90</ns0:incoming>\n      <ns0:outgoing>sid-93F749DD-2DE3-4758-A90B-A25D0A65F60F</ns0:outgoing>\n      <ns0:participantRef>sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2</ns0:participantRef>\n      <ns0:participantRef>sid-BCC388E4-2F4E-4DCE-ACAB-1B057FD12B1D</ns0:participantRef>\n      <ns0:messageFlowRef>sid-50d78215-ab36-4126-a5ab-b8e4f90f2625</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4\" initiatingParticipantRef=\"sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4\" loopType=\"None\" name=\"Order ticket\">\n      <ns0:incoming>sid-93F749DD-2DE3-4758-A90B-A25D0A65F60F</ns0:incoming>\n      <ns0:outgoing>sid-2867E824-EEE3-4FAD-87E9-15E0B0D3F17E</ns0:outgoing>\n      <ns0:participantRef>sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4</ns0:participantRef>\n      <ns0:participantRef>sid-FF49689C-332B-42D1-AD6C-8D057D858886</ns0:participantRef>\n      <ns0:messageFlowRef>sid-15d8d73c-3a31-4ae8-b32a-6352396567a0</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78\" initiatingParticipantRef=\"sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE\" loopType=\"None\" name=\"Confirm payment\">\n      <ns0:incoming>sid-3B09B51C-0CC9-48D6-98A6-0203014F9932</ns0:incoming>\n      <ns0:outgoing>sid-626A11B3-5E90-4BC2-AEB2-D3F19916DBCE</ns0:outgoing>\n      <ns0:participantRef>sid-E819EC9E-E419-4A8A-95A1-65B2F582C198</ns0:participantRef>\n      <ns0:participantRef>sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE</ns0:participantRef>\n      <ns0:messageFlowRef>sid-480e083f-04cd-4331-ab0e-3868a61e19aa</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-85CDD208-375B-493C-808D-239AB05D7F30\" initiatingParticipantRef=\"sid-28ABFC83-A09A-472A-9B65-584A100D415E\" loopType=\"None\" name=\"Refuse payment\">\n      <ns0:incoming>sid-2782F900-FF89-431C-B548-2ED4C1738816</ns0:incoming>\n      <ns0:outgoing>sid-FA47060F-FBE1-4971-949A-618272B89510</ns0:outgoing>\n      <ns0:participantRef>sid-06A843E0-3E80-48A2-B6B9-79C33F0AF6FA</ns0:participantRef>\n      <ns0:participantRef>sid-28ABFC83-A09A-472A-9B65-584A100D415E</ns0:participantRef>\n      <ns0:messageFlowRef>sid-cec720be-9112-42b4-91fc-63f05723bd58</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:eventBasedGateway eventGatewayType=\"Exclusive\" gatewayDirection=\"Diverging\" id=\"sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4\" instantiate=\"false\" name=\"\">\n      <ns0:incoming>sid-686F899C-B5AB-4B33-B5A5-D3931E153C38</ns0:incoming>\n      <ns0:outgoing>sid-84706E17-ABF5-43EB-8031-643E1E824B89</ns0:outgoing>\n      <ns0:outgoing>sid-B12CEDDB-9044-460F-BDC2-355C50A69040</ns0:outgoing>\n    </ns0:eventBasedGateway>\n    <ns0:eventBasedGateway eventGatewayType=\"Exclusive\" gatewayDirection=\"Diverging\" id=\"sid-4334BA60-223E-4C5F-9305-20B14D486830\" instantiate=\"false\" name=\"\">\n      <ns0:incoming>sid-2867E824-EEE3-4FAD-87E9-15E0B0D3F17E</ns0:incoming>\n      <ns0:outgoing>sid-3B09B51C-0CC9-48D6-98A6-0203014F9932</ns0:outgoing>\n      <ns0:outgoing>sid-2782F900-FF89-431C-B548-2ED4C1738816</ns0:outgoing>\n    </ns0:eventBasedGateway>\n    <ns0:endEvent id=\"sid-3AC96AC1-6DA1-4836-9C0E-F9EDB21DB603\" name=\"Offer canceled\">\n      <ns0:incoming>sid-640C34D5-BBA6-413A-A141-57C74C53BF9D</ns0:incoming>\n      <ns0:incoming>sid-FA47060F-FBE1-4971-949A-618272B89510</ns0:incoming>\n      <ns0:incoming>sid-626A11B3-5E90-4BC2-AEB2-D3F19916DBCE</ns0:incoming>\n    </ns0:endEvent>\n    <ns0:sequenceFlow id=\"sid-04B8562B-303F-4214-B141-23DBBA44950B\" name=\"\" sourceRef=\"sid-45C134F2-D2FD-4D0A-B72E-DBAFC35FB0DF\" targetRef=\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-686F899C-B5AB-4B33-B5A5-D3931E153C38\" name=\"\" sourceRef=\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F\" targetRef=\"sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-84706E17-ABF5-43EB-8031-643E1E824B89\" name=\"\" sourceRef=\"sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4\" targetRef=\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-B12CEDDB-9044-460F-BDC2-355C50A69040\" name=\"\" sourceRef=\"sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4\" targetRef=\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-640C34D5-BBA6-413A-A141-57C74C53BF9D\" name=\"\" sourceRef=\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA\" targetRef=\"sid-3AC96AC1-6DA1-4836-9C0E-F9EDB21DB603\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-24C344C6-9E1F-4574-9F1B-617A22746D90\" name=\"\" sourceRef=\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0\" targetRef=\"sid-A70C991E-702F-4C96-9488-D630468D3804\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-93F749DD-2DE3-4758-A90B-A25D0A65F60F\" name=\"\" sourceRef=\"sid-A70C991E-702F-4C96-9488-D630468D3804\" targetRef=\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-2867E824-EEE3-4FAD-87E9-15E0B0D3F17E\" name=\"\" sourceRef=\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4\" targetRef=\"sid-4334BA60-223E-4C5F-9305-20B14D486830\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-3B09B51C-0CC9-48D6-98A6-0203014F9932\" name=\"\" sourceRef=\"sid-4334BA60-223E-4C5F-9305-20B14D486830\" targetRef=\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-2782F900-FF89-431C-B548-2ED4C1738816\" name=\"\" sourceRef=\"sid-4334BA60-223E-4C5F-9305-20B14D486830\" targetRef=\"sid-85CDD208-375B-493C-808D-239AB05D7F30\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-FA47060F-FBE1-4971-949A-618272B89510\" name=\"\" sourceRef=\"sid-85CDD208-375B-493C-808D-239AB05D7F30\" targetRef=\"sid-3AC96AC1-6DA1-4836-9C0E-F9EDB21DB603\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-626A11B3-5E90-4BC2-AEB2-D3F19916DBCE\" name=\"\" sourceRef=\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78\" targetRef=\"sid-3AC96AC1-6DA1-4836-9C0E-F9EDB21DB603\"></ns0:sequenceFlow>\n  </ns0:choreography>\n  <ns3:BPMNDiagram id=\"sid-d4a6b8c4-19ab-4818-82f9-a1b22d27f0a7\">\n    <ns3:BPMNPlane bpmnElement=\"sid_049985cd_4703_446d_9018_b094d2a6b682\" id=\"sid-8bb90c3f-5358-4c7b-978b-97173cd7640b\">\n      <ns3:BPMNShape bpmnElement=\"sid-45C134F2-D2FD-4D0A-B72E-DBAFC35FB0DF\" id=\"sid-45C134F2-D2FD-4D0A-B72E-DBAFC35FB0DF_gui\">\n        <ns4:Bounds height=\"30.0\" width=\"30.0\" x=\"120.0\" y=\"465.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-2166a467-f53f-4a11-ae93-83eceb048e17\">\n          <ns4:Bounds height=\"22.0\" width=\"53.74285888671875\" x=\"108.12857055664062\" y=\"497.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F\" id=\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F_gui\">\n        <ns4:Bounds height=\"100.0\" width=\"150.0\" x=\"195.0\" y=\"430.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"90.25714111328125\" x=\"224.87142944335938\" y=\"472.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-FC50287B-70BB-40CD-B695-775C633D38E3\" choreographyActivityShape=\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F_gui\" id=\"sid-FC50287B-70BB-40CD-B695-775C633D38E3_gui\" isMessageVisible=\"false\" participantBandKind=\"top_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"195.0\" y=\"430.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"53.22857666015625\" x=\"243.38571166992188\" y=\"432.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956\" choreographyActivityShape=\"sid-227226E5-6AEA-41EF-A8B0-83C9A219227F_gui\" id=\"sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956_gui\" isMessageVisible participantBandKind=\"bottom_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"195.0\" y=\"510.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"75.60000610351562\" x=\"232.1999969482422\" y=\"512.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4\" id=\"sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4_gui\">\n        <ns4:Bounds height=\"40.0\" width=\"40.0\" x=\"435.0\" y=\"460.0\"></ns4:Bounds>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA\" id=\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"520.0\" y=\"275.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"63.25714111328125\" x=\"563.3714294433594\" y=\"337.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-427857D4-680C-4995-A14C-F58E8785B573\" choreographyActivityShape=\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA_gui\" id=\"sid-427857D4-680C-4995-A14C-F58E8785B573_gui\" isMessageVisible participantBandKind=\"top_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"520.0\" y=\"275.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"53.22857666015625\" x=\"568.3857116699219\" y=\"277.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-AEE838F7-26E3-4D9A-888D-35D0A0B38151\" choreographyActivityShape=\"sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA_gui\" id=\"sid-AEE838F7-26E3-4D9A-888D-35D0A0B38151_gui\" isMessageVisible=\"false\" participantBandKind=\"bottom_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"520.0\" y=\"395.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"75.60000610351562\" x=\"557.1999969482422\" y=\"397.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0\" id=\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"520.0\" y=\"545.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"36.0\" width=\"87.17141723632812\" x=\"551.4142913818359\" y=\"595.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC\" choreographyActivityShape=\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0_gui\" id=\"sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC_gui\" isMessageVisible participantBandKind=\"top_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"520.0\" y=\"545.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"53.22857666015625\" x=\"568.3857116699219\" y=\"547.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC\" choreographyActivityShape=\"sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0_gui\" id=\"sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC_gui\" isMessageVisible participantBandKind=\"bottom_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"520.0\" y=\"665.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"75.60000610351562\" x=\"557.1999969482422\" y=\"667.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-3AC96AC1-6DA1-4836-9C0E-F9EDB21DB603\" id=\"sid-3AC96AC1-6DA1-4836-9C0E-F9EDB21DB603_gui\">\n        <ns4:Bounds height=\"28.0\" width=\"28.0\" x=\"715.0\" y=\"331.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-2166a467-f53f-4a11-ae93-83eceb048e17\">\n          <ns4:Bounds height=\"11.0\" width=\"70.00714111328125\" x=\"693.9964294433594\" y=\"361.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-A70C991E-702F-4C96-9488-D630468D3804\" id=\"sid-A70C991E-702F-4C96-9488-D630468D3804_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"744.1499875806572\" y=\"545.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"54.77142333984375\" x=\"791.7642759107354\" y=\"607.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2\" choreographyActivityShape=\"sid-A70C991E-702F-4C96-9488-D630468D3804_gui\" id=\"sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2_gui\" isMessageVisible participantBandKind=\"top_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"744.1499875806572\" y=\"545.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"53.22857666015625\" x=\"792.5356992505791\" y=\"547.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-BCC388E4-2F4E-4DCE-ACAB-1B057FD12B1D\" choreographyActivityShape=\"sid-A70C991E-702F-4C96-9488-D630468D3804_gui\" id=\"sid-BCC388E4-2F4E-4DCE-ACAB-1B057FD12B1D_gui\" isMessageVisible=\"false\" participantBandKind=\"bottom_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"744.1499875806572\" y=\"665.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"75.60000610351562\" x=\"781.3499845288994\" y=\"667.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4\" id=\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"149.99999999999977\" x=\"968.2999751613145\" y=\"545.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"64.028564453125\" x=\"1011.285692934752\" y=\"607.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4\" choreographyActivityShape=\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4_gui\" id=\"sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4_gui\" isMessageVisible participantBandKind=\"top_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"149.99999999999977\" x=\"968.2999751613145\" y=\"545.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"75.60000610351562\" x=\"1005.4999721095567\" y=\"547.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-FF49689C-332B-42D1-AD6C-8D057D858886\" choreographyActivityShape=\"sid-46204067-2C7E-484E-8BC3-5979178FE4C4_gui\" id=\"sid-FF49689C-332B-42D1-AD6C-8D057D858886_gui\" isMessageVisible=\"false\" participantBandKind=\"bottom_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"149.99999999999977\" x=\"968.2999751613145\" y=\"665.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"32.400001525878906\" x=\"1027.099974398375\" y=\"667.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-4334BA60-223E-4C5F-9305-20B14D486830\" id=\"sid-4334BA60-223E-4C5F-9305-20B14D486830_gui\">\n        <ns4:Bounds height=\"40.0\" width=\"40.0\" x=\"1192.4499627419714\" y=\"595.0\"></ns4:Bounds>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78\" id=\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"1277.4499627419714\" y=\"410.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"93.34286499023438\" x=\"1305.7785302468542\" y=\"472.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-E819EC9E-E419-4A8A-95A1-65B2F582C198\" choreographyActivityShape=\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78_gui\" id=\"sid-E819EC9E-E419-4A8A-95A1-65B2F582C198_gui\" isMessageVisible=\"false\" participantBandKind=\"top_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"1277.4499627419714\" y=\"410.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"53.22857666015625\" x=\"1325.8356744118933\" y=\"412.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE\" choreographyActivityShape=\"sid-D456077E-5BB6-474E-88EC-5C0B045B5F78_gui\" id=\"sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE_gui\" isMessageVisible participantBandKind=\"bottom_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"1277.4499627419714\" y=\"530.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"32.400001525878906\" x=\"1336.249961979032\" y=\"532.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-85CDD208-375B-493C-808D-239AB05D7F30\" id=\"sid-85CDD208-375B-493C-808D-239AB05D7F30_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"1277.4499627419714\" y=\"678.5\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"87.94285583496094\" x=\"1308.478534824491\" y=\"740.5\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-06A843E0-3E80-48A2-B6B9-79C33F0AF6FA\" choreographyActivityShape=\"sid-85CDD208-375B-493C-808D-239AB05D7F30_gui\" id=\"sid-06A843E0-3E80-48A2-B6B9-79C33F0AF6FA_gui\" isMessageVisible=\"false\" participantBandKind=\"top_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"1277.4499627419714\" y=\"678.5\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"53.22857666015625\" x=\"1325.8356744118933\" y=\"680.5\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-28ABFC83-A09A-472A-9B65-584A100D415E\" choreographyActivityShape=\"sid-85CDD208-375B-493C-808D-239AB05D7F30_gui\" id=\"sid-28ABFC83-A09A-472A-9B65-584A100D415E_gui\" isMessageVisible participantBandKind=\"bottom_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"1277.4499627419714\" y=\"798.5\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n          <ns4:Bounds height=\"12.0\" width=\"32.400001525878906\" x=\"1336.249961979032\" y=\"800.5\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNEdge bpmnElement=\"sid-04B8562B-303F-4214-B141-23DBBA44950B\" id=\"sid-04B8562B-303F-4214-B141-23DBBA44950B_gui\">\n        <ns5:waypoint x=\"150.0\" y=\"480.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"195.0\" y=\"480.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-686F899C-B5AB-4B33-B5A5-D3931E153C38\" id=\"sid-686F899C-B5AB-4B33-B5A5-D3931E153C38_gui\">\n        <ns5:waypoint x=\"345.0\" y=\"480.2021563342318\"></ns5:waypoint>\n        <ns5:waypoint x=\"435.0\" y=\"480.44474393531\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-84706E17-ABF5-43EB-8031-643E1E824B89\" id=\"sid-84706E17-ABF5-43EB-8031-643E1E824B89_gui\">\n        <ns5:waypoint x=\"455.5\" y=\"460.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"455.5\" y=\"345.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"520.0\" y=\"345.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-B12CEDDB-9044-460F-BDC2-355C50A69040\" id=\"sid-B12CEDDB-9044-460F-BDC2-355C50A69040_gui\">\n        <ns5:waypoint x=\"455.5\" y=\"500.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"455.5\" y=\"615.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"520.0\" y=\"615.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-640C34D5-BBA6-413A-A141-57C74C53BF9D\" id=\"sid-640C34D5-BBA6-413A-A141-57C74C53BF9D_gui\">\n        <ns5:waypoint x=\"670.0\" y=\"345.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"715.0\" y=\"345.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-24C344C6-9E1F-4574-9F1B-617A22746D90\" id=\"sid-24C344C6-9E1F-4574-9F1B-617A22746D90_gui\">\n        <ns5:waypoint x=\"670.0\" y=\"615.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"744.1499875806572\" y=\"615.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-93F749DD-2DE3-4758-A90B-A25D0A65F60F\" id=\"sid-93F749DD-2DE3-4758-A90B-A25D0A65F60F_gui\">\n        <ns5:waypoint x=\"894.1499875806572\" y=\"615.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"968.2999751613145\" y=\"615.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-2867E824-EEE3-4FAD-87E9-15E0B0D3F17E\" id=\"sid-2867E824-EEE3-4FAD-87E9-15E0B0D3F17E_gui\">\n        <ns5:waypoint x=\"1118.2999751613143\" y=\"615.2208417011649\"></ns5:waypoint>\n        <ns5:waypoint x=\"1192.4499627419714\" y=\"615.4391804931471\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-3B09B51C-0CC9-48D6-98A6-0203014F9932\" id=\"sid-3B09B51C-0CC9-48D6-98A6-0203014F9932_gui\">\n        <ns5:waypoint x=\"1212.9499627419714\" y=\"595.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"1212.9499627419714\" y=\"480.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"1277.4499627419714\" y=\"480.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-2782F900-FF89-431C-B548-2ED4C1738816\" id=\"sid-2782F900-FF89-431C-B548-2ED4C1738816_gui\">\n        <ns5:waypoint x=\"1212.9499627419714\" y=\"635.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"1212.9499627419714\" y=\"748.5\"></ns5:waypoint>\n        <ns5:waypoint x=\"1277.4499627419714\" y=\"748.5\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-FA47060F-FBE1-4971-949A-618272B89510\" id=\"sid-FA47060F-FBE1-4971-949A-618272B89510_gui\">\n        <ns5:waypoint x=\"1427.4499627419714\" y=\"748.5\"></ns5:waypoint>\n        <ns5:waypoint x=\"1472.4499627419714\" y=\"748.5\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-626A11B3-5E90-4BC2-AEB2-D3F19916DBCE\" id=\"sid-626A11B3-5E90-4BC2-AEB2-D3F19916DBCE_gui\">\n        <ns5:waypoint x=\"1427.4499627419714\" y=\"480.55970149253733\"></ns5:waypoint>\n        <ns5:waypoint x=\"1472.4499627419714\" y=\"480.8955223880597\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n    </ns3:BPMNPlane>\n    <ns3:BPMNLabelStyle id=\"sid-2166a467-f53f-4a11-ae93-83eceb048e17\">\n      <ns4:Font isBold=\"false\" isItalic=\"false\" isStrikeThrough=\"false\" isUnderline=\"false\" name=\"Arial\" size=\"11.0\"></ns4:Font>\n    </ns3:BPMNLabelStyle>\n    <ns3:BPMNLabelStyle id=\"sid-4dfca18c-d8a3-4163-985a-24a15be9e2d0\">\n      <ns4:Font isBold=\"false\" isItalic=\"false\" isStrikeThrough=\"false\" isUnderline=\"false\" name=\"Arial\" size=\"12.0\"></ns4:Font>\n    </ns3:BPMNLabelStyle>\n  </ns3:BPMNDiagram>\n</ns0:definitions>\n",
  "output": "//SPDX-License-Identifier: MIT\npragma solidity ^0.8.9;\n\ncontract sid_049985cd_4703_446d_9018_b094d2a6b682 {\n    uint public tokenState = 1;\n    address[14] public participants;\n    uint public conditions;\n\n    constructor(address[14] memory _participants) {\n        participants = _participants;\n    }\n\n    function setConditions(uint _conditions) external {\n        conditions = _conditions;\n    }\n\n    /**\n     * taskID mapping:\n     * 1: sid-227226E5-6AEA-41EF-A8B0-83C9A219227F (Make travel offer, Travel Agency)\n     * 2: sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA (Reject offer, Customer)\n     * 3: sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0 (Book Travel, Customer)\n     * 4: sid-A70C991E-702F-4C96-9488-D630468D3804 (Pay Travel, Customer)\n     * 5: sid-46204067-2C7E-484E-8BC3-5979178FE4C4 (Order ticket, Travel Agency)\n     * 6: sid-D456077E-5BB6-474E-88EC-5C0B045B5F78 (Confirm payment, Airline)\n     * 7: sid-85CDD208-375B-493C-808D-239AB05D7F30 (Refuse payment, Airline)\n     *\n     * participant index mapping:\n     * 0: sid-FC50287B-70BB-40CD-B695-775C633D38E3 (Customer)\n     * 1: sid-3C1DAB8C-5FC2-4015-8511-5A382F0FE956 (Travel Agency)\n     * 2: sid-427857D4-680C-4995-A14C-F58E8785B573 (Customer)\n     * 3: sid-AEE838F7-26E3-4D9A-888D-35D0A0B38151 (Travel Agency)\n     * 4: sid-D4EDD4E7-B93C-434A-B8EB-B67DACF20CFC (Customer)\n     * 5: sid-B3D884E3-D024-4B2A-88EA-5B7244748ECC (Travel Agency)\n     * 6: sid-859FEE1A-5B70-4EFD-A767-18A398AFC5D2 (Customer)\n     * 7: sid-BCC388E4-2F4E-4DCE-ACAB-1B057FD12B1D (Travel Agency)\n     * 8: sid-07EB7924-0C14-4F52-B3C4-BC068A7326B4 (Travel Agency)\n     * 9: sid-FF49689C-332B-42D1-AD6C-8D057D858886 (Airline)\n     * 10: sid-E819EC9E-E419-4A8A-95A1-65B2F582C198 (Customer)\n     * 11: sid-A073A2A5-2516-4FA8-BACD-2593EE7AFACE (Airline)\n     * 12: sid-06A843E0-3E80-48A2-B6B9-79C33F0AF6FA (Customer)\n     * 13: sid-28ABFC83-A09A-472A-9B65-584A100D415E (Airline)\n     */\n\n    // Bitmask assignments:\n    // 1:  startEvent\n    // 2:  Make travel offer (taskID 1)\n    // 4:  Gateway1 (sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4)\n    // 8:  Reject offer (taskID 2)\n    // 16: Book Travel (taskID 3)\n    // 32: Pay Travel (taskID 4)\n    // 64: Order ticket (taskID 5)\n    // 128: Gateway2 (sid-4334BA60-223E-4C5F-9305-20B14D486830)\n    // 256: Confirm payment (taskID 6)\n    // 512: Refuse payment (taskID 7)\n    // 1024: End event (sid-3AC96AC1-6DA1-4836-9C0E-F9EDB21DB603)\n\n    function enact(uint taskID) external {\n        uint _tokenState = tokenState;\n        while (_tokenState != 0) {\n            // startEvent: tokenState & 1 == 1\n            if (_tokenState & 1 == 1) {\n                // Activate \"Make travel offer\" (taskID 1)\n                if (taskID == 1 && msg.sender == participants[1]) {\n                    _tokenState &= ~uint(1);\n                    _tokenState |= 2;\n                    continue;\n                }\n            }\n            // Make travel offer (taskID 1)\n            if (_tokenState & 2 == 2) {\n                // Auto: transition to Gateway1 (sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4)\n                _tokenState &= ~uint(2);\n                _tokenState |= 4;\n                continue;\n            }\n            // Gateway1 (sid-757D9B45-2990-4D72-BFA2-4DEC61AA8DA4)\n            if (_tokenState & 4 == 4) {\n                // Two outgoing sequence flows:\n                // - To \"Reject offer\" (taskID 2) -> sid-C49AC673-113F-41E0-A8FF-FA0D5D2267FA\n                // - To \"Book Travel\" (taskID 3)   -> sid-C9EDEBCA-CFD7-47C8-B834-6275614314F0\n                // Exclusive: model allows both, so both are enabled, i.e., XOR split\n\n                // In this BPMN, the gateway is diverging to two mutually exclusive tasks.\n                // We enable both, and the process continues depending on which is enacted.\n\n                _tokenState &= ~uint(4);\n                _tokenState |= (8 | 16); // \"Reject offer\" and \"Book Travel\" both active\n                continue;\n            }\n            // Reject offer (taskID 2)\n            if (_tokenState & 8 == 8) {\n                if (taskID == 2 && msg.sender == participants[2]) {\n                    // End event: Offer canceled\n                    _tokenState &= ~uint(8);\n                    _tokenState = 0;\n                    break;\n                }\n            }\n            // Book Travel (taskID 3)\n            if (_tokenState & 16 == 16) {\n                if (taskID == 3 && msg.sender == participants[4]) {\n                    // Activate \"Pay Travel\" (taskID 4)\n                    _tokenState &= ~uint(16);\n                    _tokenState |= 32;\n                    continue;\n                }\n            }\n            // Pay Travel (taskID 4)\n            if (_tokenState & 32 == 32) {\n                if (taskID == 4 && msg.sender == participants[6]) {\n                    // Activate \"Order ticket\" (taskID 5)\n                    _tokenState &= ~uint(32);\n                    _tokenState |= 64;\n                    continue;\n                }\n            }\n            // Order ticket (taskID 5)\n            if (_tokenState & 64 == 64) {\n                if (taskID == 5 && msg.sender == participants[8]) {\n                    // Activate Gateway2 (sid-4334BA60-223E-4C5F-9305-20B14D486830)\n                    _tokenState &= ~uint(64);\n                    _tokenState |= 128;\n                    continue;\n                }\n            }\n            // Gateway2 (sid-4334BA60-223E-4C5F-9305-20B14D486830)\n            if (_tokenState & 128 == 128) {\n                // Two outgoing sequence flows:\n                // - To \"Confirm payment\" (taskID 6)\n                // - To \"Refuse payment\" (taskID 7)\n                // Both are mutually exclusive (exclusive gateway), only one will be enacted\n\n                _tokenState &= ~uint(128);\n                _tokenState |= (256 | 512); // both possible\n                continue;\n            }\n            // Confirm payment (taskID 6)\n            if (_tokenState & 256 == 256) {\n                if (taskID == 6 && msg.sender == participants[11]) {\n                    // End event: Offer canceled\n                    _tokenState &= ~uint(256);\n                    _tokenState = 0;\n                    break;\n                }\n            }\n            // Refuse payment (taskID 7)\n            if (_tokenState & 512 == 512) {\n                if (taskID == 7 && msg.sender == participants[13]) {\n                    // End event: Offer canceled\n                    _tokenState &= ~uint(512);\n                    _tokenState = 0;\n                    break;\n                }\n            }\n            break;\n        }\n        tokenState = _tokenState;\n    }\n}",
  "processID": "sid_049985cd_4703_446d_9018_b094d2a6b682",
  "usage": {
    "prompt_tokens": 17038,
    "completion_tokens": 2075,
    "total_tokens": 19113,
    "cost": 0.050676
  }
}