{
  "name": "openai/gpt-4.1 - one-shot",
  "timestamp": "2025-06-10T22:22:14.495Z",
  "model": "openai/gpt-4.1",
  "prompt": "Generate a Solidity smart contract from the BPMN 2.0 choreography model XML provided above.\n\nUse the following implementation rules:\n\n- The contract name must be the `id` of the `<choreography>` element in the model.\n- Implement the function `enact(uint taskID) external` which allows a participant to execute a choreography task.\n- Only `<choreographyTask>` elements are executable via `enact()`. Gateways and start/end events are handled internally.\n- Enforce the order of task execution based on `<sequenceFlow>` elements and the choreography's control flow.\nUse the following mapping of taskID to `choreographyTask` id of the model:\n```json\n{\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A\":1,\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7\":2,\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D\":3}\n```\n- Implement exclusive gateways (`<exclusiveGateway>`) using Solidity conditional logic.\n  - Each exclusive gateway must evaluate all conditional `<sequenceFlow>` elements when active.\n  - Use Solidity `if (conditions & N == N)` syntax, exactly as defined in the `<conditionExpression>`.\n  - If at least one condition is satisfied, activate the target task.\n  - If none are satisfied, follow the `default` sequenceFlow.\n  - Each condition must be evaluated only when the gateway's bit is active in `tokenState`.\n  - Use a variable `uint public conditions` and include a setter: `function setConditions(uint _conditions) external`.\n\n- Implement parallel gateways (`<parallelGateway>`) as:\n  - Join: wait for all incoming tokens to activate.\n  - Split: activate all outgoing tasks concurrently.\n\n- Use `uint public tokenState` to encode current control flow positions:\n  - Each active task or gateway is tracked using a unique bit (e.g., 1, 2, 4, 8...).\n  - Use bitmasking (`&`, `|`, `~`) to activate or deactivate paths.\n  - Transitions may activate multiple concurrent paths.\n\n- Use the constructor: `constructor(address[n] memory _participants)` where `n` is the number of participants.\n- Allow execution of each task only by the correct initiating participant, using:\n  ```solidity\n  require(msg.sender == participants[i]);\n  ```\n- Use this mapping of participant index to participant ID:\n```json\n{\"sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07\":0,\"sid-523F1D2B-FF12-49BA-BD91-F02C592124CF\":1,\"sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9\":2,\"sid-A7E5556C-0F0D-45C0-B7A1-F64E14EE9B8A\":3,\"sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2\":4,\"sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6\":5}\n```\n\n- At the end of the process, set `tokenState = 0` to indicate termination.\n- Do not output any text other than the Solidity contract itself.\n\nAn example.\nGiven the choreography\n```XML\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions id=\"_tTv5YOycEeiHGOQ2NkJZNQ\" targetNamespace=\"http://bpmn.io/schema/bpmn\">\n  <message id=\"Message_032z8ml\"></message>\n  <message id=\"Message_19qrd5q\"></message>\n  <message id=\"Message_0vnm1wq\"></message>\n  <message id=\"Message_085o98p\"></message>\n  <choreography id=\"ChoreographyExample\">\n    <participant id=\"Participant_1tzf68i\" name=\"Customer\"></participant>\n    <participant id=\"Participant_198pz14\" name=\"Seller\"></participant>\n    <participant id=\"Participant_0378t5g\" name=\"Manufacturer\"></participant>\n    <messageFlow id=\"MessageFlow_0r98f9o\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_1tzf68i\" messageRef=\"Message_032z8ml\"></messageFlow>\n    <messageFlow id=\"MessageFlow_18xf3u6\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_1tzf68i\" messageRef=\"Message_19qrd5q\"></messageFlow>\n    <messageFlow id=\"MessageFlow_0r00txu\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_0378t5g\" messageRef=\"Message_0vnm1wq\"></messageFlow>\n    <messageFlow id=\"MessageFlow_1cx9rl4\" sourceRef=\"Participant_1tzf68i\" targetRef=\"Participant_198pz14\" messageRef=\"Message_085o98p\"></messageFlow>\n    <startEvent id=\"Event_0y1sdn3\">\n      <outgoing>Flow_0e2c805</outgoing>\n    </startEvent>\n    <choreographyTask id=\"ChoreographyTask_1vnykqp\" name=\"Order goods\" initiatingParticipantRef=\"Participant_1tzf68i\">\n      <incoming>Flow_0e2c805</incoming>\n      <outgoing>Flow_0d6j7vb</outgoing>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <participantRef>Participant_198pz14</participantRef>\n      <messageFlowRef>MessageFlow_1cx9rl4</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_16lc74v\" name=\"Produce goods\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_0ybxbuc</incoming>\n      <outgoing>Flow_14ulro8</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_0378t5g</participantRef>\n      <messageFlowRef>MessageFlow_0r00txu</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_07t2zjo\" name=\"Inform customer\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_02gqwyg</incoming>\n      <outgoing>Flow_1kim4vq</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <messageFlowRef>MessageFlow_18xf3u6</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_056ylqg\" name=\"Ship goods\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_11zi7qu</incoming>\n      <outgoing>Flow_04lnqsf</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <messageFlowRef>MessageFlow_0r98f9o</messageFlowRef>\n    </choreographyTask>\n    <sequenceFlow id=\"Flow_0e2c805\" sourceRef=\"Event_0y1sdn3\" targetRef=\"ChoreographyTask_1vnykqp\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0d6j7vb\" sourceRef=\"ChoreographyTask_1vnykqp\" targetRef=\"Gateway_1bpkhpg\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0ymdsa2\" name=\"unavailable\" sourceRef=\"Gateway_1bpkhpg\" targetRef=\"Gateway_1klfaw3\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0ybxbuc\" sourceRef=\"Gateway_1klfaw3\" targetRef=\"ChoreographyTask_16lc74v\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_02gqwyg\" sourceRef=\"Gateway_1klfaw3\" targetRef=\"ChoreographyTask_07t2zjo\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_1kim4vq\" sourceRef=\"ChoreographyTask_07t2zjo\" targetRef=\"Gateway_0xcnzox\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_14ulro8\" sourceRef=\"ChoreographyTask_16lc74v\" targetRef=\"Gateway_0xcnzox\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_067nql1\" name=\"available\" sourceRef=\"Gateway_1bpkhpg\" targetRef=\"Gateway_1yl9mch\">\n      <conditionExpression xsi:type=\"bpmn2:tFormalExpression\" language=\"Solidity\">conditions &amp; 1 == 1</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"Flow_198zju1\" sourceRef=\"Gateway_0xcnzox\" targetRef=\"Gateway_1yl9mch\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_11zi7qu\" sourceRef=\"Gateway_1yl9mch\" targetRef=\"ChoreographyTask_056ylqg\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_04lnqsf\" sourceRef=\"ChoreographyTask_056ylqg\" targetRef=\"Event_1ezlk4g\"></sequenceFlow>\n    <exclusiveGateway id=\"Gateway_1bpkhpg\" default=\"Flow_0ymdsa2\">\n      <incoming>Flow_0d6j7vb</incoming>\n      <outgoing>Flow_0ymdsa2</outgoing>\n      <outgoing>Flow_067nql1</outgoing>\n    </exclusiveGateway>\n    <exclusiveGateway id=\"Gateway_1yl9mch\" default=\"Flow_11zi7qu\">\n      <incoming>Flow_067nql1</incoming>\n      <incoming>Flow_198zju1</incoming>\n      <outgoing>Flow_11zi7qu</outgoing>\n    </exclusiveGateway>\n    <parallelGateway id=\"Gateway_1klfaw3\">\n      <incoming>Flow_0ymdsa2</incoming>\n      <outgoing>Flow_0ybxbuc</outgoing>\n      <outgoing>Flow_02gqwyg</outgoing>\n    </parallelGateway>\n    <parallelGateway id=\"Gateway_0xcnzox\">\n      <incoming>Flow_1kim4vq</incoming>\n      <incoming>Flow_14ulro8</incoming>\n      <outgoing>Flow_198zju1</outgoing>\n    </parallelGateway>\n    <endEvent id=\"Event_1ezlk4g\">\n      <incoming>Flow_04lnqsf</incoming>\n    </endEvent>\n  </choreography>\n</definitions>\n```\nA correct implementation is:\n```solidity\n//SPDX-License-Identifier: MIT\npragma solidity ^0.8.9;\n\ncontract ChoreographyExample {\n  // The example code uses bitmasking for the current state, as it is more efficient.\n  // tokenState represents the current active elements, which can include multiple concurrent paths.\n  uint public tokenState = 1;\n  address[3] public participants;\n  uint public conditions;\n\n  constructor(address[3] memory _participants) {\n    participants = _participants;\n  }\n  function setConditions(uint _conditions) external {\n    conditions = _conditions;\n  }\n\n  function enact(uint id) external {\n    uint _tokenState = tokenState;\n\n    while(_tokenState != 0) {\n      if (_tokenState & 1 == 1) {\n        // <--- ChoreographyTask_1vnykqp Order goods --->\n        if (0 == id && msg.sender == participants[0]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(1);\n        _tokenState |= 6;\n        continue; \n        }\n      }\n      if (_tokenState & 2 == 2) {\n        // <--- ChoreographyTask_16lc74v Produce goods --->\n        if (1 == id && msg.sender == participants[1]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(2);\n        _tokenState |= 8;\n        continue; \n        }\n      }\n      if (_tokenState & 4 == 4) {\n        // <--- ChoreographyTask_07t2zjo Inform customer --->\n        if (2 == id && msg.sender == participants[1]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(4);\n        _tokenState |= 16;\n        continue; \n        }\n      }\n      if (_tokenState & 32 == 32) {\n        // <--- ChoreographyTask_056ylqg Ship goods --->\n        if (3 == id && msg.sender == participants[1]) {\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(32);\n        _tokenState |= 0;\n        break; // is end\n        }\n      }\n      if (_tokenState & 6 == 6) {\n        if (conditions & 1 == 1) {\n          // <---  auto transition  --->\n          // Transition: deactivate current, activate next state\n          _tokenState &= ~uint(6);\n          _tokenState |= 32;\n          continue; \n        }\n      }\n      if (_tokenState & 24 == 24) {\n        // <---  auto transition  --->\n        // Transition: deactivate current, activate next state\n        _tokenState &= ~uint(24);\n        _tokenState |= 32;\n        continue; \n      }\n      break;\n    }\n\n    tokenState = _tokenState;\n  }\n\n}\n```",
  "input": "<ns0:definitions xmlns:ns0=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:ns2=\"http://www.signavio.com\" xmlns:ns3=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:ns4=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:ns5=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" exporter=\"Signavio Process Editor, http://www.signavio.com\" exporterVersion=\"19.1.2\" expressionLanguage=\"http://www.w3.org/TR/XPath\" id=\"sid-cf1ecff5-fedb-4aae-ad4e-dccde81f8e77\" targetNamespace=\"http://www.signavio.com\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" xsi:schemaLocation=\"http://www.omg.org/spec/BPMN/20100524/MODEL http://www.omg.org/spec/BPMN/2.0/20100501/BPMN20.xsd\">\n  <ns0:message id=\"sid-EFF00D31-CED6-4BCE-AA1F-A2E13AC8E887\" name=\"Anruf\"></ns0:message>\n  <ns0:message id=\"sid-FD16108B-2BAC-4D9F-9ACF-688786BC49AD\" name=\"Notiz\"></ns0:message>\n  <ns0:choreography id=\"sid_0d6d63ff_a888_46c1_8a54_c14e911d0d83\" isClosed=\"false\">\n    <ns0:participant id=\"sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07\" name=\"Kunde\"></ns0:participant>\n    <ns0:participant id=\"sid-523F1D2B-FF12-49BA-BD91-F02C592124CF\" name=\"Hotline\"></ns0:participant>\n    <ns0:participant id=\"sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9\" name=\"MA\"></ns0:participant>\n    <ns0:participant id=\"sid-A7E5556C-0F0D-45C0-B7A1-F64E14EE9B8A\" name=\"K\"></ns0:participant>\n    <ns0:participant id=\"sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2\" name=\"MA\"></ns0:participant>\n    <ns0:participant id=\"sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6\" name=\"Disponent\"></ns0:participant>\n    <ns0:messageFlow id=\"sid-d0d1d029-3bf3-4fe9-a2b8-a699fe4a701b\" messageRef=\"sid-EFF00D31-CED6-4BCE-AA1F-A2E13AC8E887\" sourceRef=\"sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07\" targetRef=\"sid-523F1D2B-FF12-49BA-BD91-F02C592124CF\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-5d706af7-7349-4bfb-a08d-03c9079602b5\" sourceRef=\"sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9\" targetRef=\"sid-A7E5556C-0F0D-45C0-B7A1-F64E14EE9B8A\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-84b32591-37ec-47fe-8c31-517bab73fc59\" sourceRef=\"sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2\" targetRef=\"sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6\"></ns0:messageFlow>\n    <ns0:messageFlow id=\"sid-342df7e2-712f-4613-8170-41ac05f6316f\" messageRef=\"sid-FD16108B-2BAC-4D9F-9ACF-688786BC49AD\" sourceRef=\"sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6\" targetRef=\"sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2\"></ns0:messageFlow>\n    <ns0:startEvent id=\"sid-E3FF28E6-444E-4E5D-AA46-3B0F1AA085CA\" name=\"PC Prob\">\n      <ns0:outgoing>sid-02A567F0-92DB-4F84-B062-708469608137</ns0:outgoing>\n    </ns0:startEvent>\n    <ns0:choreographyTask id=\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A\" initiatingParticipantRef=\"sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07\" loopType=\"None\" name=\"Anrufen\">\n      <ns0:incoming>sid-02A567F0-92DB-4F84-B062-708469608137</ns0:incoming>\n      <ns0:outgoing>sid-830F8A6C-5927-4C56-A096-AD18F935141F</ns0:outgoing>\n      <ns0:participantRef>sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07</ns0:participantRef>\n      <ns0:participantRef>sid-523F1D2B-FF12-49BA-BD91-F02C592124CF</ns0:participantRef>\n      <ns0:messageFlowRef>sid-d0d1d029-3bf3-4fe9-a2b8-a699fe4a701b</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7\" initiatingParticipantRef=\"sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9\" loopType=\"None\" name=\"Problem lösen\">\n      <ns0:incoming>sid-00BEFE45-F6D4-4EDD-A851-975CEFC38E12</ns0:incoming>\n      <ns0:outgoing>sid-D3E5C0F7-AA0A-404A-9526-EDACD6DD57E8</ns0:outgoing>\n      <ns0:participantRef>sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9</ns0:participantRef>\n      <ns0:participantRef>sid-A7E5556C-0F0D-45C0-B7A1-F64E14EE9B8A</ns0:participantRef>\n      <ns0:messageFlowRef>sid-5d706af7-7349-4bfb-a08d-03c9079602b5</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:choreographyTask id=\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D\" initiatingParticipantRef=\"sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2\" loopType=\"None\" name=\"Notiz\">\n      <ns0:incoming>sid-2DBED302-6E32-4E45-B184-7EBA65A4445C</ns0:incoming>\n      <ns0:outgoing>sid-50DDBD74-6BA4-42E0-8F50-9AD4003CED28</ns0:outgoing>\n      <ns0:participantRef>sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2</ns0:participantRef>\n      <ns0:participantRef>sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6</ns0:participantRef>\n      <ns0:messageFlowRef>sid-84b32591-37ec-47fe-8c31-517bab73fc59</ns0:messageFlowRef>\n      <ns0:messageFlowRef>sid-342df7e2-712f-4613-8170-41ac05f6316f</ns0:messageFlowRef>\n    </ns0:choreographyTask>\n    <ns0:exclusiveGateway gatewayDirection=\"Diverging\" id=\"sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA\" name=\"lösbar?\" default=\"sid-00BEFE45-F6D4-4EDD-A851-975CEFC38E12\">\n      <ns0:incoming>sid-830F8A6C-5927-4C56-A096-AD18F935141F</ns0:incoming>\n      <ns0:outgoing>sid-00BEFE45-F6D4-4EDD-A851-975CEFC38E12</ns0:outgoing>\n      <ns0:outgoing>sid-2DBED302-6E32-4E45-B184-7EBA65A4445C</ns0:outgoing>\n    </ns0:exclusiveGateway>\n    <ns0:endEvent id=\"sid-B2F12880-2ED3-4343-B64D-447D5E1D6C00\" name=\":)\">\n      <ns0:incoming>sid-D3E5C0F7-AA0A-404A-9526-EDACD6DD57E8</ns0:incoming>\n      <ns0:incoming>sid-50DDBD74-6BA4-42E0-8F50-9AD4003CED28</ns0:incoming>\n    </ns0:endEvent>\n    <ns0:sequenceFlow id=\"sid-02A567F0-92DB-4F84-B062-708469608137\" name=\"\" sourceRef=\"sid-E3FF28E6-444E-4E5D-AA46-3B0F1AA085CA\" targetRef=\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-830F8A6C-5927-4C56-A096-AD18F935141F\" name=\"\" sourceRef=\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A\" targetRef=\"sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-D3E5C0F7-AA0A-404A-9526-EDACD6DD57E8\" name=\"\" sourceRef=\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7\" targetRef=\"sid-B2F12880-2ED3-4343-B64D-447D5E1D6C00\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-00BEFE45-F6D4-4EDD-A851-975CEFC38E12\" name=\"ja\" sourceRef=\"sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA\" targetRef=\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7\"></ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-2DBED302-6E32-4E45-B184-7EBA65A4445C\" name=\"conditions &amp; 1 == 1\" sourceRef=\"sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA\" targetRef=\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D\">\n      <conditionExpression xsi:type=\"ns0:tFormalExpression\" language=\"Solidity\">conditions &amp; 1 == 1</conditionExpression>\n    </ns0:sequenceFlow>\n    <ns0:sequenceFlow id=\"sid-50DDBD74-6BA4-42E0-8F50-9AD4003CED28\" name=\"\" sourceRef=\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D\" targetRef=\"sid-B2F12880-2ED3-4343-B64D-447D5E1D6C00\"></ns0:sequenceFlow>\n  </ns0:choreography>\n  <ns3:BPMNDiagram id=\"sid-4029ca85-dc04-4d9a-bc90-78ded9ee9d94\">\n    <ns3:BPMNPlane bpmnElement=\"sid_0d6d63ff_a888_46c1_8a54_c14e911d0d83\" id=\"sid-34c218dd-df16-4a4b-948c-5dba811449b7\">\n      <ns3:BPMNShape bpmnElement=\"sid-E3FF28E6-444E-4E5D-AA46-3B0F1AA085CA\" id=\"sid-E3FF28E6-444E-4E5D-AA46-3B0F1AA085CA_gui\">\n        <ns4:Bounds height=\"30.0\" width=\"30.0\" x=\"60.0\" y=\"435.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-fcc253ac-30f4-4d2a-8efb-ae90ca3f50e3\">\n          <ns4:Bounds height=\"11.0\" width=\"38.89285659790039\" x=\"55.553571701049805\" y=\"467.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A\" id=\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"135.0\" y=\"380.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"43.19999694824219\" x=\"188.4000015258789\" y=\"442.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07\" choreographyActivityShape=\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A_gui\" id=\"sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07_gui\" isMessageVisible participantBandKind=\"top_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"135.0\" y=\"380.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"34.71428680419922\" x=\"192.6428565979004\" y=\"382.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-523F1D2B-FF12-49BA-BD91-F02C592124CF\" choreographyActivityShape=\"sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A_gui\" id=\"sid-523F1D2B-FF12-49BA-BD91-F02C592124CF_gui\" isMessageVisible=\"false\" participantBandKind=\"bottom_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"135.0\" y=\"500.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"37.02857208251953\" x=\"191.48571395874023\" y=\"502.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA\" id=\"sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA_gui\" isMarkerVisible>\n        <ns4:Bounds height=\"40.0\" width=\"40.0\" x=\"345.0\" y=\"430.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-fcc253ac-30f4-4d2a-8efb-ae90ca3f50e3\">\n          <ns4:Bounds height=\"12.0\" width=\"39.342857360839844\" x=\"345.3285713195801\" y=\"475.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7\" id=\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"430.0\" y=\"198.5\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"75.60000610351562\" x=\"467.1999969482422\" y=\"260.5\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9\" choreographyActivityShape=\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7_gui\" id=\"sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9_gui\" isMessageVisible=\"false\" participantBandKind=\"top_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"430.0\" y=\"198.5\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"16.199996948242188\" x=\"496.9000015258789\" y=\"200.5\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-A7E5556C-0F0D-45C0-B7A1-F64E14EE9B8A\" choreographyActivityShape=\"sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7_gui\" id=\"sid-A7E5556C-0F0D-45C0-B7A1-F64E14EE9B8A_gui\" isMessageVisible=\"false\" participantBandKind=\"bottom_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"430.0\" y=\"318.5\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"7.714286804199219\" x=\"501.1428565979004\" y=\"320.5\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D\" id=\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D_gui\">\n        <ns4:Bounds height=\"140.0\" width=\"150.0\" x=\"430.0\" y=\"380.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"27.77143096923828\" x=\"491.11428451538086\" y=\"442.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2\" choreographyActivityShape=\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D_gui\" id=\"sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2_gui\" isMessageVisible=\"false\" participantBandKind=\"top_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"430.0\" y=\"380.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"16.199996948242188\" x=\"496.9000015258789\" y=\"382.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6\" choreographyActivityShape=\"sid-5ADAF5B5-2E03-4531-B02C-72D10257157D_gui\" id=\"sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6_gui\" isMessageVisible participantBandKind=\"bottom_non_initiating\">\n        <ns4:Bounds height=\"20.0\" width=\"150.0\" x=\"430.0\" y=\"500.0\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n          <ns4:Bounds height=\"12.0\" width=\"55.54286193847656\" x=\"477.2285690307617\" y=\"502.0\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNShape bpmnElement=\"sid-B2F12880-2ED3-4343-B64D-447D5E1D6C00\" id=\"sid-B2F12880-2ED3-4343-B64D-447D5E1D6C00_gui\">\n        <ns4:Bounds height=\"28.0\" width=\"28.0\" x=\"625.0\" y=\"254.5\"></ns4:Bounds>\n        <ns3:BPMNLabel labelStyle=\"sid-fcc253ac-30f4-4d2a-8efb-ae90ca3f50e3\">\n          <ns4:Bounds height=\"11.0\" width=\"8.485713958740234\" x=\"634.7571430206299\" y=\"284.5\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNShape>\n      <ns3:BPMNEdge bpmnElement=\"sid-02A567F0-92DB-4F84-B062-708469608137\" id=\"sid-02A567F0-92DB-4F84-B062-708469608137_gui\">\n        <ns5:waypoint x=\"90.0\" y=\"450.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"135.0\" y=\"450.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-830F8A6C-5927-4C56-A096-AD18F935141F\" id=\"sid-830F8A6C-5927-4C56-A096-AD18F935141F_gui\">\n        <ns5:waypoint x=\"285.0\" y=\"450.2411575562701\"></ns5:waypoint>\n        <ns5:waypoint x=\"345.0\" y=\"450.43408360128615\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-D3E5C0F7-AA0A-404A-9526-EDACD6DD57E8\" id=\"sid-D3E5C0F7-AA0A-404A-9526-EDACD6DD57E8_gui\">\n        <ns5:waypoint x=\"580.0\" y=\"268.5\"></ns5:waypoint>\n        <ns5:waypoint x=\"625.0\" y=\"268.5\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-00BEFE45-F6D4-4EDD-A851-975CEFC38E12\" id=\"sid-00BEFE45-F6D4-4EDD-A851-975CEFC38E12_gui\">\n        <ns5:waypoint x=\"365.5\" y=\"430.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"365.5\" y=\"268.5\"></ns5:waypoint>\n        <ns5:waypoint x=\"430.0\" y=\"268.5\"></ns5:waypoint>\n        <ns3:BPMNLabel labelStyle=\"sid-fcc253ac-30f4-4d2a-8efb-ae90ca3f50e3\">\n          <ns4:Bounds height=\"10.028564453125\" width=\"12.0\" x=\"345.5\" y=\"411.971435546875\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-2DBED302-6E32-4E45-B184-7EBA65A4445C\" id=\"sid-2DBED302-6E32-4E45-B184-7EBA65A4445C_gui\">\n        <ns5:waypoint x=\"385.0\" y=\"450.4301075268817\"></ns5:waypoint>\n        <ns5:waypoint x=\"430.0\" y=\"450.26881720430106\"></ns5:waypoint>\n        <ns3:BPMNLabel labelStyle=\"sid-fcc253ac-30f4-4d2a-8efb-ae90ca3f50e3\">\n          <ns4:Bounds height=\"12.080103796493916\" width=\"22.414294650051488\" x=\"392.86225634118034\" y=\"430.32126678024815\"></ns4:Bounds>\n        </ns3:BPMNLabel>\n      </ns3:BPMNEdge>\n      <ns3:BPMNEdge bpmnElement=\"sid-50DDBD74-6BA4-42E0-8F50-9AD4003CED28\" id=\"sid-50DDBD74-6BA4-42E0-8F50-9AD4003CED28_gui\">\n        <ns5:waypoint x=\"580.0\" y=\"450.0\"></ns5:waypoint>\n        <ns5:waypoint x=\"677.1875\" y=\"450.0\"></ns5:waypoint>\n      </ns3:BPMNEdge>\n    </ns3:BPMNPlane>\n    <ns3:BPMNLabelStyle id=\"sid-fcc253ac-30f4-4d2a-8efb-ae90ca3f50e3\">\n      <ns4:Font isBold=\"false\" isItalic=\"false\" isStrikeThrough=\"false\" isUnderline=\"false\" name=\"Arial\" size=\"11.0\"></ns4:Font>\n    </ns3:BPMNLabelStyle>\n    <ns3:BPMNLabelStyle id=\"sid-44996ba3-7425-406a-8008-d65cc63c0a1d\">\n      <ns4:Font isBold=\"false\" isItalic=\"false\" isStrikeThrough=\"false\" isUnderline=\"false\" name=\"Arial\" size=\"12.0\"></ns4:Font>\n    </ns3:BPMNLabelStyle>\n  </ns3:BPMNDiagram>\n</ns0:definitions>\n",
  "output": "//SPDX-License-Identifier: MIT\npragma solidity ^0.8.9;\n\ncontract sid_0d6d63ff_a888_46c1_8a54_c14e911d0d83 {\n    // Participants:\n    // 0: sid-5F45D451-1079-4B66-9E00-7AB9E5E04A07 (Kunde)\n    // 1: sid-523F1D2B-FF12-49BA-BD91-F02C592124CF (Hotline)\n    // 2: sid-40C9EC3B-AF7E-4F00-9789-30AB417365B9 (MA)\n    // 3: sid-A7E5556C-0F0D-45C0-B7A1-F64E14EE9B8A (K)\n    // 4: sid-5C359DF1-7DC7-4F36-B8D0-5025C3041FB2 (MA)\n    // 5: sid-C62C80E9-F907-4908-BEFF-853B8CAAC4A6 (Disponent)\n\n    address[6] public participants;\n    uint public tokenState = 1; // Start token at startEvent (bit 0)\n    uint public conditions;\n\n    // State bitmasks\n    uint constant BIT_START = 1;                // 2**0 : Start (sid-E3FF28E6-444E-4E5D-AA46-3B0F1AA085CA)\n    uint constant BIT_TASK1 = 2;                // 2**1 : sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A (Anrufen)\n    uint constant BIT_GATEWAY = 4;              // 2**2 : sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA (lösbar?)\n    uint constant BIT_TASK2 = 8;                // 2**3 : sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7 (Problem lösen)\n    uint constant BIT_TASK3 = 16;               // 2**4 : sid-5ADAF5B5-2E03-4531-B02C-72D10257157D (Notiz)\n    uint constant BIT_END = 32;                 // 2**5 : sid-B2F12880-2ED3-4343-B64D-447D5E1D6C00 (End)\n\n    constructor(address[6] memory _participants) {\n        participants = _participants;\n    }\n\n    function setConditions(uint _conditions) external {\n        conditions = _conditions;\n    }\n\n    /**\n     * taskID mapping:\n     * 1: sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A (Anrufen)\n     * 2: sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7 (Problem lösen)\n     * 3: sid-5ADAF5B5-2E03-4531-B02C-72D10257157D (Notiz)\n     */\n    function enact(uint taskID) external {\n        uint _tokenState = tokenState;\n\n        while (_tokenState != 0) {\n            // <--- Start Event (sid-E3FF28E6-444E-4E5D-AA46-3B0F1AA085CA) --->\n            // Automatically transition from start to first task\n            if (_tokenState & BIT_START == BIT_START) {\n                // Transition to Anrufen (task 1)\n                _tokenState &= ~BIT_START;\n                _tokenState |= BIT_TASK1;\n                continue;\n            }\n\n            // <--- ChoreographyTask: Anrufen (sid-9BF45F4A-BF50-4B1F-9CA6-A48300FEC94A, taskID=1, initiator=0) --->\n            if (_tokenState & BIT_TASK1 == BIT_TASK1) {\n                if (taskID == 1 && msg.sender == participants[0]) {\n                    // Transition to lösbar? (gateway)\n                    _tokenState &= ~BIT_TASK1;\n                    _tokenState |= BIT_GATEWAY;\n                    continue;\n                }\n            }\n\n            // <--- ExclusiveGateway: lösbar? (sid-B5FF172E-CBDE-4E4A-9C42-80CC0FA905BA) --->\n            if (_tokenState & BIT_GATEWAY == BIT_GATEWAY) {\n                // Two outgoing: \n                // - ja: to Problem lösen (task 2)\n                // - condition: to Notiz (task 3) if (conditions & 1 == 1)\n                // default is ja (Problem lösen)\n                bool transitioned = false;\n                if ((conditions & 1) == 1) {\n                    // Path to Notiz (task 3)\n                    _tokenState &= ~BIT_GATEWAY;\n                    _tokenState |= BIT_TASK3;\n                    transitioned = true;\n                }\n                if (!transitioned) {\n                    // Default path to Problem lösen (task 2)\n                    _tokenState &= ~BIT_GATEWAY;\n                    _tokenState |= BIT_TASK2;\n                    transitioned = true;\n                }\n                if (transitioned) continue;\n            }\n\n            // <--- ChoreographyTask: Problem lösen (sid-4BD2E9FD-7A3A-4418-B277-F03832E242C7, taskID=2, initiator=2) --->\n            if (_tokenState & BIT_TASK2 == BIT_TASK2) {\n                if (taskID == 2 && msg.sender == participants[2]) {\n                    // Transition to End\n                    _tokenState &= ~BIT_TASK2;\n                    _tokenState |= BIT_END;\n                    continue;\n                }\n            }\n\n            // <--- ChoreographyTask: Notiz (sid-5ADAF5B5-2E03-4531-B02C-72D10257157D, taskID=3, initiator=4) --->\n            if (_tokenState & BIT_TASK3 == BIT_TASK3) {\n                if (taskID == 3 && msg.sender == participants[4]) {\n                    // Transition to End\n                    _tokenState &= ~BIT_TASK3;\n                    _tokenState |= BIT_END;\n                    continue;\n                }\n            }\n\n            // <--- End Event (sid-B2F12880-2ED3-4343-B64D-447D5E1D6C00) --->\n            if (_tokenState & BIT_END == BIT_END) {\n                // End process\n                _tokenState = 0;\n                break;\n            }\n\n            // No more valid transitions, exit loop\n            break;\n        }\n\n        tokenState = _tokenState;\n    }\n}",
  "processID": "sid_0d6d63ff_a888_46c1_8a54_c14e911d0d83",
  "usage": {
    "prompt_tokens": 10165,
    "completion_tokens": 1499,
    "total_tokens": 11664,
    "cost": 0.032322
  }
}