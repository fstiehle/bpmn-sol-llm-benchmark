{
  "name": "Small Model - Zero Shot Prompt",
  "description": "Small Model - Zero Shot Prompt",
  "timestamp": "2025-05-30T15:34:03.401Z",
  "model": "qwen3-14b",
  "prompt": "Above is a BPMN 2.0 choreography. Generate a solidity smart contract from this.\nName the contract by the choreography ID.\nThe contract must implement the function \"enact(uint taskID)\", which lets a participant execute a task.\nThe function enforces the order of tasks. \nExtract the rules based on the flow given in the diagram. Only tasks are executed by participants, gateways are evaluated by the smart contract autonomously.\nThe different taskIDs for the function must equal the ones from the model as follows:\n{\"ChoreographyTask_1vnykqp\":1,\"ChoreographyTask_16lc74v\":2,\"ChoreographyTask_07t2zjo\":3,\"ChoreographyTask_056ylqg\":4}\n\nOutgoing flows from an exclusiveGateway which are not the default flow, need to enforce a condition.\nThe conditions are present in the model as \"conditionExpression\". Enforce them based on the flow given in the diagram.\nThe contracts needs a function \"setconditions(uint _conditions)\".\n\nAlso, enforce the correct initiator (initiatingParticipantRef) of a task by comparing the address.\nParticipants' addresses are set in the constructor \"constructor(address[n] memory _participants)\", \nwhere n stands for the number of participants. You must encode them like follows: \n{\"Participant_1tzf68i\":0,\"Participant_198pz14\":1,\"Participant_0378t5g\":2}\n\nThe current state (or marking) of the contract must be encoded in the \"tokenState\" variable.\nIf the end of the contract is reached, set tokenState to 0.\nJust output the smart contract, do not output additional, redundant text. In case of \nproblems write \"ERROR\" followed by a precise diagnosis of the problem.\n\nStart writing the smart contract:",
  "input": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions id=\"_tTv5YOycEeiHGOQ2NkJZNQ\" targetNamespace=\"http://bpmn.io/schema/bpmn\">\n  <message id=\"Message_032z8ml\"></message>\n  <message id=\"Message_19qrd5q\"></message>\n  <message id=\"Message_0vnm1wq\"></message>\n  <message id=\"Message_085o98p\"></message>\n  <choreography id=\"Choreography\">\n    <participant id=\"Participant_1tzf68i\" name=\"Customer\"></participant>\n    <participant id=\"Participant_198pz14\" name=\"Seller\"></participant>\n    <participant id=\"Participant_0378t5g\" name=\"Manufacturer\"></participant>\n    <messageFlow id=\"MessageFlow_0r98f9o\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_1tzf68i\" messageRef=\"Message_032z8ml\"></messageFlow>\n    <messageFlow id=\"MessageFlow_18xf3u6\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_1tzf68i\" messageRef=\"Message_19qrd5q\"></messageFlow>\n    <messageFlow id=\"MessageFlow_0r00txu\" sourceRef=\"Participant_198pz14\" targetRef=\"Participant_0378t5g\" messageRef=\"Message_0vnm1wq\"></messageFlow>\n    <messageFlow id=\"MessageFlow_1cx9rl4\" sourceRef=\"Participant_1tzf68i\" targetRef=\"Participant_198pz14\" messageRef=\"Message_085o98p\"></messageFlow>\n    <startEvent id=\"Event_0y1sdn3\">\n      <outgoing>Flow_0e2c805</outgoing>\n    </startEvent>\n    <choreographyTask id=\"ChoreographyTask_1vnykqp\" name=\"Check availability of goods\" initiatingParticipantRef=\"Participant_1tzf68i\">\n      <incoming>Flow_0e2c805</incoming>\n      <outgoing>Flow_0d6j7vb</outgoing>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <participantRef>Participant_198pz14</participantRef>\n      <messageFlowRef>MessageFlow_1cx9rl4</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_16lc74v\" name=\"Produce goods\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_0ybxbuc</incoming>\n      <outgoing>Flow_14ulro8</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_0378t5g</participantRef>\n      <messageFlowRef>MessageFlow_0r00txu</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_07t2zjo\" name=\"Inform customer\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_02gqwyg</incoming>\n      <outgoing>Flow_1kim4vq</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <messageFlowRef>MessageFlow_18xf3u6</messageFlowRef>\n    </choreographyTask>\n    <choreographyTask id=\"ChoreographyTask_056ylqg\" name=\"Ship goods\" initiatingParticipantRef=\"Participant_198pz14\">\n      <incoming>Flow_11zi7qu</incoming>\n      <outgoing>Flow_04lnqsf</outgoing>\n      <participantRef>Participant_198pz14</participantRef>\n      <participantRef>Participant_1tzf68i</participantRef>\n      <messageFlowRef>MessageFlow_0r98f9o</messageFlowRef>\n    </choreographyTask>\n    <sequenceFlow id=\"Flow_0e2c805\" sourceRef=\"Event_0y1sdn3\" targetRef=\"ChoreographyTask_1vnykqp\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0d6j7vb\" sourceRef=\"ChoreographyTask_1vnykqp\" targetRef=\"Gateway_1bpkhpg\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0ymdsa2\" name=\"unavailable\" sourceRef=\"Gateway_1bpkhpg\" targetRef=\"Gateway_1klfaw3\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_0ybxbuc\" sourceRef=\"Gateway_1klfaw3\" targetRef=\"ChoreographyTask_16lc74v\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_02gqwyg\" sourceRef=\"Gateway_1klfaw3\" targetRef=\"ChoreographyTask_07t2zjo\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_1kim4vq\" sourceRef=\"ChoreographyTask_07t2zjo\" targetRef=\"Gateway_0xcnzox\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_14ulro8\" sourceRef=\"ChoreographyTask_16lc74v\" targetRef=\"Gateway_0xcnzox\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_067nql1\" name=\"available\" sourceRef=\"Gateway_1bpkhpg\" targetRef=\"Gateway_1yl9mch\">\n      <conditionExpression xsi:type=\"bpmn2:tFormalExpression\" language=\"Solidity\">conditions &amp; 1 == 1</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"Flow_198zju1\" sourceRef=\"Gateway_0xcnzox\" targetRef=\"Gateway_1yl9mch\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_11zi7qu\" sourceRef=\"Gateway_1yl9mch\" targetRef=\"ChoreographyTask_056ylqg\"></sequenceFlow>\n    <sequenceFlow id=\"Flow_04lnqsf\" sourceRef=\"ChoreographyTask_056ylqg\" targetRef=\"Event_1ezlk4g\"></sequenceFlow>\n    <exclusiveGateway id=\"Gateway_1bpkhpg\" default=\"Flow_0ymdsa2\">\n      <incoming>Flow_0d6j7vb</incoming>\n      <outgoing>Flow_0ymdsa2</outgoing>\n      <outgoing>Flow_067nql1</outgoing>\n    </exclusiveGateway>\n    <exclusiveGateway id=\"Gateway_1yl9mch\" default=\"Flow_11zi7qu\">\n      <incoming>Flow_067nql1</incoming>\n      <incoming>Flow_198zju1</incoming>\n      <outgoing>Flow_11zi7qu</outgoing>\n    </exclusiveGateway>\n    <parallelGateway id=\"Gateway_1klfaw3\">\n      <incoming>Flow_0ymdsa2</incoming>\n      <outgoing>Flow_0ybxbuc</outgoing>\n      <outgoing>Flow_02gqwyg</outgoing>\n    </parallelGateway>\n    <parallelGateway id=\"Gateway_0xcnzox\">\n      <incoming>Flow_1kim4vq</incoming>\n      <incoming>Flow_14ulro8</incoming>\n      <outgoing>Flow_198zju1</outgoing>\n    </parallelGateway>\n    <endEvent id=\"Event_1ezlk4g\">\n      <incoming>Flow_04lnqsf</incoming>\n    </endEvent>\n  </choreography>\n</definitions>\n",
  "output": "```solidity\n// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\ncontract Choreography {\n    uint public tokenState;\n    address[3] public participants;\n    uint public conditions;\n\n    // Task IDs mapping\n    mapping(uint => string) public taskNames;\n    mapping(string => uint) public taskIDs;\n\n    constructor(address[3] memory _participants) {\n        participants = _participants;\n        taskIDs[\"ChoreographyTask_1vnykqp\"] = 1;\n        taskIDs[\"ChoreographyTask_16lc74v\"] = 2;\n        taskIDs[\"ChoreographyTask_07t2zjo\"] = 3;\n        taskIDs[\"ChoreographyTask_056ylqg\"] = 4;\n        tokenState = 1; // Start at the initial event\n    }\n\n    function setconditions(uint _conditions) public {\n        conditions = _conditions;\n    }\n\n    function enact(uint taskID) public {\n        require(tokenState > 0, \"Process already completed.\");\n        require(taskIDs[msg.sender] == taskID, \"Only the initiating participant can execute this task.\");\n\n        if (tokenState == 1) {\n            // StartEvent -> ChoreographyTask_1vnykqp\n            require(taskID == 1, \"Invalid task for current state.\");\n            tokenState = 2;\n        } else if (tokenState == 2) {\n            // ChoreographyTask_1vnykqp -> Gateway_1bpkhpg\n            require(taskID == 1, \"Invalid task for current state.\");\n            tokenState = 3;\n        } else if (tokenState == 3) {\n            // Gateway_1bpkhpg evaluates condition\n            if ((conditions & 1) == 1) {\n                // available branch\n                tokenState = 5;\n            } else {\n                // unavailable branch\n                tokenState = 4;\n            }\n        } else if (tokenState == 4) {\n            // Gateway_1klfaw3 -> ChoreographyTask_16lc74v and ChoreographyTask_07t2zjo\n            require(taskID == 2 || taskID == 3, \"Invalid task for current state.\");\n            if (taskID == 2 && tokenState == 4) {\n                tokenState = 6;\n            } else if (taskID == 3 && tokenState == 4) {\n                tokenState = 7;\n            }\n        } else if (tokenState == 5) {\n            // Gateway_1bpkhpg -> Gateway_1yl9mch\n            require(taskID == 1, \"Invalid task for current state.\");\n            tokenState = 8;\n        } else if (tokenState == 6) {\n            // ChoreographyTask_16lc74v -> Gateway_0xcnzox\n            require(taskID == 2, \"Invalid task for current state.\");\n            tokenState = 9;\n        } else if (tokenState == 7) {\n            // ChoreographyTask_07t2zjo -> Gateway_0xcnzox\n            require(taskID == 3, \"Invalid task for current state.\");\n            tokenState = 9;\n        } else if (tokenState == 8) {\n            // Gateway_1yl9mch -> ChoreographyTask_056ylqg\n            require(taskID == 4, \"Invalid task for current state.\");\n            tokenState = 10;\n        } else if (tokenState == 9) {\n            // Gateway_0xcnzox -> Gateway_1yl9mch\n            require(taskID == 2 || taskID == 3, \"Invalid task for current state.\");\n            tokenState = 8;\n        } else if (tokenState == 10) {\n            // ChoreographyTask_056ylqg -> EndEvent\n            require(taskID == 4, \"Invalid task for current state.\");\n            tokenState = 0;\n        } else {\n            revert(\"Invalid token state.\");\n        }\n    }\n\n    // Mapping of participants to their indices\n    function getParticipantIndex(string memory _participantId) internal pure returns (uint) {\n        if (keccak256(abi.encodePacked(_participantId)) == keccak256(abi.encodePacked(\"Participant_1tzf68i\"))) return 0;\n        if (keccak256(abi.encodePacked(_participantId)) == keccak256(abi.encodePacked(\"Participant_198pz14\"))) return 1;\n        if (keccak256(abi.encodePacked(_participantId)) == keccak256(abi.encodePacked(\"Participant_0378t5g\"))) return 2;\n        revert(\"Unknown participant.\");\n    }\n\n    // Helper to check if the sender is the correct participant for a task\n    modifier onlyInitiator(string memory _taskName) {\n        require(getParticipantIndex(taskNames[_taskName]) == uint(msg.sender), \"Not the initiator of this task.\");\n        _;\n    }\n}\n```",
  "processID": "Choreography"
}